import{c as createSSRApp,d as createApp}from"./runtime-dom.esm-bundler.4kTYh-b9.js";import{d as defineComponent,R as h,a4 as Suspense}from"./runtime-core.esm-bundler.BnWtpekm.js";const setup=()=>{},StaticHtml=defineComponent({props:{value:String,name:String,hydrate:{type:Boolean,default:!0}},setup({name,value,hydrate}){if(!value)return()=>null;let tagName=hydrate?"astro-slot":"astro-static-slot";return()=>h(tagName,{name,innerHTML:value})}});var static_html_default=StaticHtml;let appMap=new WeakMap;var client_default=element=>async(Component,props,slotted,{client})=>{if(!element.hasAttribute("ssr"))return;const name=Component.name?`${Component.name} Host`:void 0,slots={};for(const[key,value]of Object.entries(slotted))slots[key]=()=>h(static_html_default,{value,name:key==="default"?void 0:key});const isHydrate=client!=="only",bootstrap=isHydrate?createSSRApp:createApp;let appInstance=appMap.get(element);if(appInstance)appInstance.props=props,appInstance.slots=slots,appInstance.component.$forceUpdate();else{appInstance={props,slots};const app=bootstrap({name,render(){let content=h(Component,appInstance.props,appInstance.slots);return appInstance.component=this,isAsync(Component.setup)&&(content=h(Suspense,null,content)),content}});app.config.idPrefix=element.getAttribute("prefix")??void 0,await setup(),app.mount(element,isHydrate),appMap.set(element,appInstance),element.addEventListener("astro:unmount",()=>app.unmount(),{once:!0})}};function isAsync(fn){const constructor=fn?.constructor;return constructor&&constructor.name==="AsyncFunction"}export{client_default as default};
