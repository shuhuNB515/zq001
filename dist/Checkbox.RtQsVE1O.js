import{a as useForwardPropsEmits}from"./useForwardPropsEmits.Bq_EhdOw.js";import{c as createContext}from"./createContext.C6fsTd1r.js";import{a as isNullish,i as isEqual}from"./nullish.CBVn7mTa.js";import{i as isValueEqualOrExist}from"./isValueEqualOrExist.CukdK4Lr.js";import{u as useFormControl}from"./useFormControl.81Lo_Dv8.js";import{u as useForwardExpose,b as useVModel}from"./useForwardExpose.Ct4MH066.js";import{P as Primitive}from"./Primitive.DurlyzDV.js";import{R as RovingFocusItem_default}from"./RovingFocusItem.FbNb0M3v.js";import{a as usePrimitiveElement}from"./Collection.Of9eBc3j.js";import{V as VisuallyHidden_default}from"./VisuallyHidden.WBPUesEd.js";import{d as defineComponent,k as computed,s as watch,e as createBlock,o as openBlock,m as mergeProps,c as createElementBlock,b as createCommentVNode,F as Fragment,r as renderList,w as withCtx,l as renderSlot,u as unref,x as resolveDynamicComponent,f as createVNode}from"./runtime-core.esm-bundler.T-J3b-OY.js";import{a as withKeys,w as withModifiers}from"./runtime-dom.esm-bundler.DIawZXRK.js";import{P as Presence_default}from"./Presence.BaHqK_e-.js";import{c as cn}from"./utils.DJhkAclG.js";import{_ as _export_sfc}from"./_plugin-vue_export-helper.Dak_cNiX.js";import{C as Check}from"./check.Bfv1dkmy.js";import{r as reactiveOmit}from"./index.BnVuat8O.js";var VisuallyHiddenInputBubble_vue_vue_type_script_setup_true_lang_default=defineComponent({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(__props){const props=__props,{primitiveElement,currentElement}=usePrimitiveElement(),valueState=computed(()=>props.checked??props.value);return watch(valueState,(cur,prev)=>{if(!currentElement.value)return;const input=currentElement.value,inputProto=window.HTMLInputElement.prototype,setValue=Object.getOwnPropertyDescriptor(inputProto,"value").set;if(setValue&&cur!==prev){const inputEvent=new Event("input",{bubbles:!0}),changeEvent=new Event("change",{bubbles:!0});setValue.call(input,cur),input.dispatchEvent(inputEvent),input.dispatchEvent(changeEvent)}}),(_ctx,_cache)=>(openBlock(),createBlock(VisuallyHidden_default,mergeProps({ref_key:"primitiveElement",ref:primitiveElement},{...props,..._ctx.$attrs},{as:"input"}),null,16))}}),VisuallyHiddenInputBubble_default=VisuallyHiddenInputBubble_vue_vue_type_script_setup_true_lang_default,VisuallyHiddenInput_vue_vue_type_script_setup_true_lang_default=defineComponent({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(__props){const props=__props,isFormArrayEmptyAndRequired=computed(()=>typeof props.value=="object"&&Array.isArray(props.value)&&props.value.length===0&&props.required),parsedValue=computed(()=>typeof props.value=="string"||typeof props.value=="number"||typeof props.value=="boolean"||props.value===null||props.value===void 0?[{name:props.name,value:props.value}]:typeof props.value=="object"&&Array.isArray(props.value)?props.value.flatMap((obj,index)=>typeof obj=="object"?Object.entries(obj).map(([key,value])=>({name:`${props.name}[${index}][${key}]`,value})):{name:`${props.name}[${index}]`,value:obj}):props.value!==null&&typeof props.value=="object"&&!Array.isArray(props.value)?Object.entries(props.value).map(([key,value])=>({name:`${props.name}[${key}]`,value})):[]);return(_ctx,_cache)=>(openBlock(),createElementBlock(Fragment,null,[createCommentVNode(" We render single input if it's required "),isFormArrayEmptyAndRequired.value?(openBlock(),createBlock(VisuallyHiddenInputBubble_default,mergeProps({key:_ctx.name},{...props,..._ctx.$attrs},{name:_ctx.name,value:_ctx.value}),null,16,["name","value"])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(parsedValue.value,parsed=>(openBlock(),createBlock(VisuallyHiddenInputBubble_default,mergeProps({key:parsed.name},{ref_for:!0},{...props,..._ctx.$attrs},{name:parsed.name,value:parsed.value}),null,16,["name","value"]))),128))],2112))}}),VisuallyHiddenInput_default=VisuallyHiddenInput_vue_vue_type_script_setup_true_lang_default;const[injectCheckboxGroupRootContext]=createContext("CheckboxGroupRoot");function isIndeterminate(checked){return checked==="indeterminate"}function getState(checked){return isIndeterminate(checked)?"indeterminate":checked?"checked":"unchecked"}const[injectCheckboxRootContext,provideCheckboxRootContext]=createContext("CheckboxRoot");var CheckboxRoot_vue_vue_type_script_setup_true_lang_default=defineComponent({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultValue:{type:[Boolean,String],required:!1},modelValue:{type:[Boolean,String,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},value:{type:null,required:!1,default:"on"},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(__props,{emit:__emit}){const props=__props,emits=__emit,{forwardRef,currentElement}=useForwardExpose(),checkboxGroupContext=injectCheckboxGroupRootContext(null),modelValue=useVModel(props,"modelValue",emits,{defaultValue:props.defaultValue,passive:props.modelValue===void 0}),disabled=computed(()=>checkboxGroupContext?.disabled.value||props.disabled),checkboxState=computed(()=>isNullish(checkboxGroupContext?.modelValue.value)?modelValue.value==="indeterminate"?"indeterminate":modelValue.value:isValueEqualOrExist(checkboxGroupContext.modelValue.value,props.value));function handleClick(){if(isNullish(checkboxGroupContext?.modelValue.value))modelValue.value=isIndeterminate(modelValue.value)?!0:!modelValue.value;else{const modelValueArray=[...checkboxGroupContext.modelValue.value||[]];if(isValueEqualOrExist(modelValueArray,props.value)){const index=modelValueArray.findIndex(i=>isEqual(i,props.value));modelValueArray.splice(index,1)}else modelValueArray.push(props.value);checkboxGroupContext.modelValue.value=modelValueArray}}const isFormControl=useFormControl(currentElement),ariaLabel=computed(()=>props.id&&currentElement.value?document.querySelector(`[for="${props.id}"]`)?.innerText:void 0);return provideCheckboxRootContext({disabled,state:checkboxState}),(_ctx,_cache)=>(openBlock(),createBlock(resolveDynamicComponent(unref(checkboxGroupContext)?.rovingFocus.value?unref(RovingFocusItem_default):unref(Primitive)),mergeProps(_ctx.$attrs,{id:_ctx.id,ref:unref(forwardRef),role:"checkbox","as-child":_ctx.asChild,as:_ctx.as,type:_ctx.as==="button"?"button":void 0,"aria-checked":unref(isIndeterminate)(checkboxState.value)?"mixed":checkboxState.value,"aria-required":_ctx.required,"aria-label":_ctx.$attrs["aria-label"]||ariaLabel.value,"data-state":unref(getState)(checkboxState.value),"data-disabled":disabled.value?"":void 0,disabled:disabled.value,focusable:unref(checkboxGroupContext)?.rovingFocus.value?!disabled.value:void 0,onKeydown:withKeys(withModifiers(()=>{},["prevent"]),["enter"]),onClick:handleClick}),{default:withCtx(()=>[renderSlot(_ctx.$slots,"default",{modelValue:unref(modelValue),state:checkboxState.value}),unref(isFormControl)&&_ctx.name&&!unref(checkboxGroupContext)?(openBlock(),createBlock(unref(VisuallyHiddenInput_default),{key:0,type:"checkbox",checked:!!checkboxState.value,name:_ctx.name,value:_ctx.value,disabled:disabled.value,required:_ctx.required},null,8,["checked","name","value","disabled","required"])):createCommentVNode("v-if",!0)]),_:3},16,["id","as-child","as","type","aria-checked","aria-required","aria-label","data-state","data-disabled","disabled","focusable","onKeydown"]))}}),CheckboxRoot_default=CheckboxRoot_vue_vue_type_script_setup_true_lang_default,CheckboxIndicator_vue_vue_type_script_setup_true_lang_default=defineComponent({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(__props){const{forwardRef}=useForwardExpose(),rootContext=injectCheckboxRootContext();return(_ctx,_cache)=>(openBlock(),createBlock(unref(Presence_default),{present:_ctx.forceMount||unref(isIndeterminate)(unref(rootContext).state.value)||unref(rootContext).state.value===!0},{default:withCtx(()=>[createVNode(unref(Primitive),mergeProps({ref:unref(forwardRef),"data-state":unref(getState)(unref(rootContext).state.value),"data-disabled":unref(rootContext).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":_ctx.asChild,as:_ctx.as},_ctx.$attrs),{default:withCtx(()=>[renderSlot(_ctx.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),CheckboxIndicator_default=CheckboxIndicator_vue_vue_type_script_setup_true_lang_default;const _sfc_main=defineComponent({__name:"Checkbox",props:{defaultValue:{type:[Boolean,String]},modelValue:{type:[Boolean,String,null]},disabled:{type:Boolean},value:{},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(__props,{expose:__expose,emit:__emit}){__expose();const props=__props,emits=__emit,delegatedProps=reactiveOmit(props,"class"),forwarded=useForwardPropsEmits(delegatedProps,emits),__returned__={props,emits,delegatedProps,forwarded,get Check(){return Check},get CheckboxIndicator(){return CheckboxIndicator_default},get CheckboxRoot(){return CheckboxRoot_default},get cn(){return cn}};return Object.defineProperty(__returned__,"__isScriptSetup",{enumerable:!1,value:!0}),__returned__}});function _sfc_render(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createBlock($setup.CheckboxRoot,mergeProps($setup.forwarded,{class:$setup.cn("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",$setup.props.class),"data-source-file":"src/components/ui/checkbox/Checkbox.vue","data-source-line-start":"18","data-source-line-end":"29"}),{default:withCtx(()=>[createVNode($setup.CheckboxIndicator,{class:"grid place-content-center text-current","data-source-file":"src/components/ui/checkbox/Checkbox.vue","data-source-line-start":"24","data-source-line-end":"28"},{default:withCtx(()=>[renderSlot(_ctx.$slots,"default",{},()=>[createVNode($setup.Check,{class:"h-4 w-4","data-source-file":"src/components/ui/checkbox/Checkbox.vue","data-source-line-start":"26","data-source-line-end":"26"})])]),_:3})]),_:3},16,["class"])}const Checkbox=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{Checkbox as C};
