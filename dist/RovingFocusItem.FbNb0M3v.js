import{u as useId}from"./Presence.BaHqK_e-.js";import{P as Primitive}from"./Primitive.DurlyzDV.js";import{u as useCollection}from"./Collection.Of9eBc3j.js";import{i as injectRovingFocusGroupContext,g as getFocusIntent,w as wrapArray,f as focusFirst}from"./RovingFocusGroup.B5eqmrrc.js";import{d as defineComponent,k as computed,i as onMounted,D as onUnmounted,e as createBlock,o as openBlock,w as withCtx,f as createVNode,u as unref,l as renderSlot,E as nextTick}from"./runtime-core.esm-bundler.T-J3b-OY.js";var RovingFocusItem_vue_vue_type_script_setup_true_lang_default=defineComponent({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(__props){const props=__props,context=injectRovingFocusGroupContext(),randomId=useId(),id=computed(()=>props.tabStopId||randomId),isCurrentTabStop=computed(()=>context.currentTabStopId.value===id.value),{getItems,CollectionItem}=useCollection();onMounted(()=>{props.focusable&&context.onFocusableItemAdd()}),onUnmounted(()=>{props.focusable&&context.onFocusableItemRemove()});function handleKeydown(event){if(event.key==="Tab"&&event.shiftKey){context.onItemShiftTab();return}if(event.target!==event.currentTarget)return;const focusIntent=getFocusIntent(event,context.orientation.value,context.dir.value);if(focusIntent!==void 0){if(event.metaKey||event.ctrlKey||event.altKey||!props.allowShiftKey&&event.shiftKey)return;event.preventDefault();let candidateNodes=[...getItems().map(i=>i.ref).filter(i=>i.dataset.disabled!=="")];if(focusIntent==="last")candidateNodes.reverse();else if(focusIntent==="prev"||focusIntent==="next"){focusIntent==="prev"&&candidateNodes.reverse();const currentIndex=candidateNodes.indexOf(event.currentTarget);candidateNodes=context.loop.value?wrapArray(candidateNodes,currentIndex+1):candidateNodes.slice(currentIndex+1)}nextTick(()=>focusFirst(candidateNodes))}}return(_ctx,_cache)=>(openBlock(),createBlock(unref(CollectionItem),null,{default:withCtx(()=>[createVNode(unref(Primitive),{tabindex:isCurrentTabStop.value?0:-1,"data-orientation":unref(context).orientation.value,"data-active":_ctx.active?"":void 0,"data-disabled":_ctx.focusable?void 0:"",as:_ctx.as,"as-child":_ctx.asChild,onMousedown:_cache[0]||(_cache[0]=event=>{_ctx.focusable?unref(context).onItemFocus(id.value):event.preventDefault()}),onFocus:_cache[1]||(_cache[1]=$event=>unref(context).onItemFocus(id.value)),onKeydown:handleKeydown},{default:withCtx(()=>[renderSlot(_ctx.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),RovingFocusItem_default=RovingFocusItem_vue_vue_type_script_setup_true_lang_default;export{RovingFocusItem_default as R};
