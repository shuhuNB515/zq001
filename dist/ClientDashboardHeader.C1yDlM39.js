import{c as createContext}from"./createContext.C6fsTd1r.js";import{u as useForwardExpose,i as isClient}from"./useForwardExpose.Ct4MH066.js";import{P as Primitive}from"./Primitive.DurlyzDV.js";import{d as defineComponent,h as ref,e as createBlock,o as openBlock,w as withCtx,l as renderSlot,u as unref,j as watchEffect,b as createCommentVNode,k as computed,i as onMounted,D as onUnmounted,q as toRefs,s as watch,H as withDirectives,A as normalizeClass,m as mergeProps,c as createElementBlock,a as createBaseVNode,f as createVNode,g as createTextVNode,t as toDisplayString,F as Fragment,r as renderList}from"./runtime-core.esm-bundler.T-J3b-OY.js";import{c as cn}from"./utils.DJhkAclG.js";import{c as cva}from"./index.oGhdtl4H.js";import{_ as _export_sfc}from"./_plugin-vue_export-helper.Dak_cNiX.js";import{b as vShow}from"./runtime-dom.esm-bundler.DIawZXRK.js";import{S as SafeIcon}from"./SafeIcon.DLoMq80p.js";import{C as CLIENT_DASHBOARD_PROFILE_AVATAR}from"./client_data.BuItvpOF.js";const[injectAvatarRootContext,provideAvatarRootContext]=createContext("AvatarRoot");var AvatarRoot_vue_vue_type_script_setup_true_lang_default=defineComponent({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(__props){return useForwardExpose(),provideAvatarRootContext({imageLoadingStatus:ref("idle")}),(_ctx,_cache)=>(openBlock(),createBlock(unref(Primitive),{"as-child":_ctx.asChild,as:_ctx.as},{default:withCtx(()=>[renderSlot(_ctx.$slots,"default")]),_:3},8,["as-child","as"]))}}),AvatarRoot_default=AvatarRoot_vue_vue_type_script_setup_true_lang_default,AvatarFallback_vue_vue_type_script_setup_true_lang_default=defineComponent({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(__props){const props=__props,rootContext=injectAvatarRootContext();useForwardExpose();const canRender=ref(props.delayMs===void 0);return watchEffect(onCleanup=>{if(props.delayMs&&isClient){const timerId=window.setTimeout(()=>{canRender.value=!0},props.delayMs);onCleanup(()=>{window.clearTimeout(timerId)})}}),(_ctx,_cache)=>canRender.value&&unref(rootContext).imageLoadingStatus.value!=="loaded"?(openBlock(),createBlock(unref(Primitive),{key:0,"as-child":_ctx.asChild,as:_ctx.as},{default:withCtx(()=>[renderSlot(_ctx.$slots,"default")]),_:3},8,["as-child","as"])):createCommentVNode("v-if",!0)}}),AvatarFallback_default=AvatarFallback_vue_vue_type_script_setup_true_lang_default;function resolveLoadingStatus(image,src){return image?src?(image.src!==src&&(image.src=src),image.complete&&image.naturalWidth>0?"loaded":"loading"):"error":"idle"}function useImageLoadingStatus(src,{referrerPolicy,crossOrigin}={}){const isMounted=ref(!1),imageRef=ref(null),image=computed(()=>isMounted.value?(!imageRef.value&&isClient&&(imageRef.value=new window.Image),imageRef.value):null),loadingStatus=ref(resolveLoadingStatus(image.value,src.value)),updateStatus=status=>()=>{isMounted.value&&(loadingStatus.value=status)};return onMounted(()=>{isMounted.value=!0,watchEffect(onCleanup=>{const img=image.value;if(!img)return;loadingStatus.value=resolveLoadingStatus(img,src.value);const handleLoad=updateStatus("loaded"),handleError=updateStatus("error");img.addEventListener("load",handleLoad),img.addEventListener("error",handleError),referrerPolicy?.value&&(img.referrerPolicy=referrerPolicy.value),typeof crossOrigin?.value=="string"&&(img.crossOrigin=crossOrigin.value),onCleanup(()=>{img.removeEventListener("load",handleLoad),img.removeEventListener("error",handleError)})})}),onUnmounted(()=>{isMounted.value=!1}),loadingStatus}var AvatarImage_vue_vue_type_script_setup_true_lang_default=defineComponent({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(__props,{emit:__emit}){const props=__props,emits=__emit,{src,referrerPolicy,crossOrigin}=toRefs(props);useForwardExpose();const rootContext=injectAvatarRootContext(),imageLoadingStatus=useImageLoadingStatus(src,{referrerPolicy,crossOrigin});return watch(imageLoadingStatus,newValue=>{emits("loadingStatusChange",newValue),newValue!=="idle"&&(rootContext.imageLoadingStatus.value=newValue)},{immediate:!0}),(_ctx,_cache)=>withDirectives((openBlock(),createBlock(unref(Primitive),{role:"img","as-child":_ctx.asChild,as:_ctx.as,src:unref(src),"referrer-policy":unref(referrerPolicy)},{default:withCtx(()=>[renderSlot(_ctx.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[vShow,unref(imageLoadingStatus)==="loaded"]])}}),AvatarImage_default=AvatarImage_vue_vue_type_script_setup_true_lang_default;const _sfc_main$3=defineComponent({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(__props,{expose:__expose}){__expose();const __returned__={props:__props,get AvatarRoot(){return AvatarRoot_default},get cn(){return cn},get avatarVariant(){return avatarVariant}};return Object.defineProperty(__returned__,"__isScriptSetup",{enumerable:!1,value:!0}),__returned__}});function _sfc_render$3(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createBlock($setup.AvatarRoot,{class:normalizeClass($setup.cn($setup.avatarVariant({size:$props.size,shape:$props.shape}),$setup.props.class)),"data-source-file":"src/components/ui/avatar/Avatar.vue","data-source-line-start":"19","data-source-line-end":"21"},{default:withCtx(()=>[renderSlot(_ctx.$slots,"default")]),_:3},8,["class"])}const Avatar=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),_sfc_main$2=defineComponent({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(__props,{expose:__expose}){__expose();const __returned__={props:__props,get AvatarFallback(){return AvatarFallback_default}};return Object.defineProperty(__returned__,"__isScriptSetup",{enumerable:!1,value:!0}),__returned__}});function _sfc_render$2(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createBlock($setup.AvatarFallback,mergeProps($setup.props,{"data-source-file":"src/components/ui/avatar/AvatarFallback.vue","data-source-line-start":"9","data-source-line-end":"11"}),{default:withCtx(()=>[renderSlot(_ctx.$slots,"default")]),_:3},16)}const AvatarFallback=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),_sfc_main$1=defineComponent({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(__props,{expose:__expose}){__expose();const __returned__={props:__props,get AvatarImage(){return AvatarImage_default}};return Object.defineProperty(__returned__,"__isScriptSetup",{enumerable:!1,value:!0}),__returned__}});function _sfc_render$1(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createBlock($setup.AvatarImage,mergeProps($setup.props,{class:"h-full w-full object-cover","data-source-file":"src/components/ui/avatar/AvatarImage.vue","data-source-line-start":"9","data-source-line-end":"11"}),{default:withCtx(()=>[renderSlot(_ctx.$slots,"default")]),_:3},16)}const AvatarImage=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),avatarVariant=cva("inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden",{variants:{size:{sm:"h-10 w-10 text-xs",base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}}),_sfc_main=defineComponent({__name:"ClientDashboardHeader",setup(__props,{expose:__expose}){__expose();const userInfo=ref({name:"张三",phone:"138****1234",pickupCount:12,deliveryCount:8,memberLevel:"普通会员",joinDate:"2024年加入"}),stats=[{label:"取件次数",value:userInfo.value.pickupCount,icon:"PackageOpen",color:"text-blue-500"},{label:"寄件次数",value:userInfo.value.deliveryCount,icon:"Send",color:"text-green-500"},{label:"会员等级",value:userInfo.value.memberLevel,icon:"Star",color:"text-yellow-500"}],__returned__={userInfo,stats,get Avatar(){return Avatar},get AvatarImage(){return AvatarImage},get AvatarFallback(){return AvatarFallback},SafeIcon,get CLIENT_DASHBOARD_PROFILE_AVATAR(){return CLIENT_DASHBOARD_PROFILE_AVATAR}};return Object.defineProperty(__returned__,"__isScriptSetup",{enumerable:!1,value:!0}),__returned__}}),_hoisted_1={class:"mb-8","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"40","data-source-line-end":"87"},_hoisted_2={class:"bg-gradient-to-r from-primary/10 to-accent/10 border border-primary/20 rounded-lg p-6 mb-6","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"42","data-source-line-end":"65"},_hoisted_3={class:"flex items-center justify-between","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"43","data-source-line-end":"64"},_hoisted_4={class:"flex items-center space-x-4","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"44","data-source-line-end":"59"},_hoisted_5={"data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"51","data-source-line-end":"58"},_hoisted_6={class:"text-2xl font-bold text-foreground","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"52","data-source-line-end":"54"},_hoisted_7={class:"text-sm text-muted-foreground mt-1","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"55","data-source-line-end":"57"},_hoisted_8={class:"hidden md:flex items-center space-x-2 bg-white/50 px-4 py-2 rounded-lg","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"60","data-source-line-end":"63"},_hoisted_9={class:"text-sm font-medium","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"62","data-source-line-end":"62"},_hoisted_10={class:"grid grid-cols-1 md:grid-cols-3 gap-4","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"68","data-source-line-end":"86"},_hoisted_11={class:"flex items-center justify-between","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"74","data-source-line-end":"84"},_hoisted_12={"data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"75","data-source-line-end":"80"},_hoisted_13={class:"text-sm text-muted-foreground mb-1","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"76","data-source-line-end":"76"},_hoisted_14={class:"text-2xl font-bold text-foreground","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"77","data-source-line-end":"79"};function _sfc_render(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createVNode($setup.Avatar,{class:"w-16 h-16","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"45","data-source-line-end":"50"},{default:withCtx(()=>[createVNode($setup.AvatarImage,{src:$setup.CLIENT_DASHBOARD_PROFILE_AVATAR.url,alt:$setup.userInfo.name,"data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"46","data-source-line-end":"46"},null,8,["src","alt"]),createVNode($setup.AvatarFallback,{class:"bg-primary text-primary-foreground text-lg font-semibold","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"47","data-source-line-end":"49"},{default:withCtx(()=>[createTextVNode(toDisplayString($setup.userInfo.name.substring(0,2)),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_5,[createBaseVNode("h1",_hoisted_6," 欢迎回来，"+toDisplayString($setup.userInfo.name)+"！ ",1),createBaseVNode("p",_hoisted_7,toDisplayString($setup.userInfo.joinDate)+" • "+toDisplayString($setup.userInfo.phone),1)])]),createBaseVNode("div",_hoisted_8,[createVNode($setup.SafeIcon,{name:"Crown",size:20,class:"text-yellow-500","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"61","data-source-line-end":"61"}),createBaseVNode("span",_hoisted_9,toDisplayString($setup.userInfo.memberLevel),1)])])]),createBaseVNode("div",_hoisted_10,[(openBlock(),createElementBlock(Fragment,null,renderList($setup.stats,stat=>createBaseVNode("div",{key:stat.label,class:"bg-card border border-border rounded-lg p-4 hover:shadow-card transition-shadow","data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"69","data-source-line-end":"85"},[createBaseVNode("div",_hoisted_11,[createBaseVNode("div",_hoisted_12,[createBaseVNode("p",_hoisted_13,toDisplayString(stat.label),1),createBaseVNode("p",_hoisted_14,toDisplayString((stat.value,stat.value)),1)]),createBaseVNode("div",{class:normalizeClass(["p-3 rounded-lg bg-secondary",stat.color]),"data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"81","data-source-line-end":"83"},[createVNode($setup.SafeIcon,{name:stat.icon,size:24,"data-source-file":"src/components/client-dashboard/ClientDashboardHeader.vue","data-source-line-start":"82","data-source-line-end":"82"},null,8,["name"])],2)])])),64))])])}const ClientDashboardHeader=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{ClientDashboardHeader as default};
